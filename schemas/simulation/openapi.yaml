openapi: 3.1.0
info:
  title: Simulation
  version: 1.0.0
paths:
  /simulations:
    post:
      summary: >-
        Évalue l'éligibilité et le volume CEE d'une opération standardisée
        d'économies d'énergie
      operationId: createSimulations
      requestBody:
        content:
          application/json:
            schema:
              $schema: https://json-schema.org/draft/2020-12/schema
              title: Simulation CEE
              description: >-
                Simulation de l'éligibilité et du volume CEE d'une opération
                standardisée d'économies d'énergie
              type: object
              properties:
                fiche:
                  $id: https://schemas.ceeconnect.fr/formats/reference_fiche
                  $schema: https://json-schema.org/draft/2020-12/schema
                  title: Référence interne
                  type: string
                  pattern: >-
                    (AGRI|BAR|BAT|IND|RES|TRA)-(BA|CH|EC|EN|EQ|SE|TH|UT)-[0-9]+(-SE)?v[0-9]+[-][0-9]+
                  examples:
                    - BAR-EN-101v39-4
                    - BAR-EN-102v39-2
                    - BAR-EN-103v39-5
                bonification:
                  $id: https://schemas.ceeconnect.fr/formats/reference_bonification
                  $schema: https://json-schema.org/draft/2020-12/schema
                  title: Référence interne
                  type: string
                  pattern: >-
                    (ZNI|GPE-ZNI|ETS|CPE|GPE|CFT|CRC|CRM|CTH|CDP|CDC)([-][0-9]+)?v[0-9]*([-][0-9]*)?
                  examples:
                    - CRMv31-1
                    - CDP-1v20-1
                    - ZNIv35-1
                dateEngagement:
                  type: string
                  format: date
              required:
                - fiche
                - dateEngagement
              anyOf:
                - &ref_56
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-EN-101v39-4
                      type: object
                      properties:
                        adresse: &ref_0
                          title: Adresse
                          type: object
                          properties:
                            banId: &ref_3
                              title: >-
                                Identifiant de l'adresse dans la Base Adresse
                                Nationale
                              type: string
                              maxLength: 240
                            numero: &ref_4
                              title: Numéro dans la voie
                              type: string
                              maxLength: 240
                            voie: &ref_5
                              title: Nom de voie ou lieu dit
                              type: string
                              maxLength: 240
                            complement: &ref_6
                              title: Complément d'adresse
                              type: string
                              maxLength: 240
                            commune: &ref_7
                              title: Nom de la commune
                              type: string
                              maxLength: 240
                            codePostal:
                              pattern: ^([02][1-9]|[12345678][0-9]|9[012345])[0-9]{3}$
                              title: Code postal
                              type: string
                            codeCommune:
                              pattern: >-
                                ^([02][1-9]|2[AB]|[1345678][0-9]|9[012345])[0-9]{3}$
                              title: Code INSEE
                              type: string
                          required:
                            - voie
                            - commune
                            - codePostal
                            - codeCommune
                          examples:
                            - numero: '9'
                              voie: Rue des Colonnes
                              commune: Paris
                              codePostal: '75002'
                              codeInsee: '75102'
                              banId: 75102221900009
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            ancienneteBatiment: &ref_1
                              title: Ancienneté du bâtiment
                              description: >-
                                Ancienneté du bâtiment à la date d'engagement de
                                l'opération
                              oneOf:
                                - title: Bâtiment de moins de 2 ans
                                  const: NEUF
                                - title: Bâtiment de plus de deux ans
                                  const: EXISTANT
                            quantite:
                              title: Surface d'isolant (m²)
                              type: number
                              minimum: 0
                          required:
                            - ancienneteBatiment
                            - quantite
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: &ref_2
                            banId: 92062_A100
                            voie: Grande Arche Défense
                            commune: Puteaux
                            codeCommune: '92062'
                            codePostal: '92800'
                          description:
                            ancienneteBatiment: EXISTANT
                            quantite: 100
                    - properties:
                        fiche:
                          const: BAR-EN-101v39-4
                      required:
                        - fiche
                - &ref_57
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-EN-102v39-2
                      type: object
                      properties:
                        adresse: *ref_0
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            ancienneteBatiment: *ref_1
                            quantite:
                              title: Surface d'isolant (m²)
                              type: number
                              minimum: 0
                          required:
                            - ancienneteBatiment
                            - quantite
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            ancienneteBatiment: EXISTANT
                            quantite: 100
                    - properties:
                        fiche:
                          const: BAR-EN-102v39-2
                      required:
                        - fiche
                - &ref_58
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-EN-103v39-5
                      type: object
                      properties:
                        adresse: &ref_8
                          title: Adresse
                          type: object
                          properties:
                            banId: *ref_3
                            numero: *ref_4
                            voie: *ref_5
                            complement: *ref_6
                            commune: *ref_7
                            codePostal:
                              title: Code postal
                              type: string
                              pattern: >-
                                ^([02][1-9]|[12345678][0-9]|9[012345]|97[12346])[0-9]{3}$
                            codeCommune:
                              title: Code INSEE
                              type: string
                              pattern: >-
                                ^([02][1-9]|2[AB]|[1345678][0-9]|9[012345]|97[12346])[0-9]{3}$
                          required:
                            - voie
                            - commune
                            - codePostal
                            - codeCommune
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            ancienneteBatiment: *ref_1
                            quantite:
                              title: Surface d'isolant (m²)
                              type: number
                              minimum: 0
                          required:
                            - ancienneteBatiment
                            - quantite
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            ancienneteBatiment: EXISTANT
                            quantite: 100
                    - properties:
                        fiche:
                          const: BAR-EN-103v39-5
                      required:
                        - fiche
                - &ref_59
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-EN-104v14-1
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            ancienneteBatiment: *ref_1
                            energieChauffage:
                              title: Energie de chauffage principale
                              type: string
                              oneOf: &ref_31
                                - &ref_39
                                  const: ELECTRICITE
                                  title: Electricité
                                - &ref_40
                                  const: COMBUSTIBLES
                                  title: Combustibles
                            quantite:
                              title: Nombre d'équipements
                              description: >-
                                Nombre de fenêtres ou portes-fenêtres complètes
                                avec vitrage isolant posées
                              type: number
                              minimum: 0
                          required:
                            - ancienneteBatiment
                            - energieChauffage
                            - quantite
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            ancienneteBatiment: EXISTANT
                            energieChauffage: ELECTRICITE
                            quantite: 10
                    - properties:
                        fiche:
                          const: BAR-EN-104v14-1
                      required:
                        - fiche
                - &ref_60
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-EN-105v39-3
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            ancienneteBatiment: *ref_1
                            quantite:
                              title: Surface d'isolant (m²)
                              type: number
                              minimum: 0
                          required:
                            - ancienneteBatiment
                            - quantite
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            ancienneteBatiment: EXISTANT
                            quantite: 100
                    - properties:
                        fiche:
                          const: BAR-EN-105v39-3
                      required:
                        - fiche
                - &ref_61
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-EN-106v33-4
                      type: object
                      properties:
                        adresse: &ref_9
                          title: Adresse
                          type: object
                          properties:
                            banId: *ref_3
                            numero: *ref_4
                            voie: *ref_5
                            complement: *ref_6
                            commune: *ref_7
                            codePostal:
                              title: Code postal
                              type: string
                              pattern: >-
                                ^([02][1-9]|[12345678][0-9]|9[012345]|97[12346])[0-9]{3}$
                            codeCommune:
                              title: Code INSEE
                              type: string
                              pattern: >-
                                ^([02][1-9]|2[AB]|[1345678][0-9]|9[012345]|97[12346])[0-9]{3}$
                          required:
                            - voie
                            - commune
                            - codePostal
                            - codeCommune
                          examples:
                            - {}
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment: &ref_10
                              title: Type de bâtiment
                              type: string
                              oneOf:
                                - &ref_23
                                  title: Maison individuelle
                                  const: MAISON
                                - &ref_34
                                  title: Immeuble collectif
                                  const: IMMEUBLE
                            ancienneteBatiment: *ref_1
                            quantite:
                              title: Surface d'isolant (m²)
                              type: number
                              minimum: 0
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - quantite
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: &ref_11
                            banId: '97411_1060_00002'
                            numero: '2'
                            voie: Rue de Paris
                            commune: Saint-Denis
                            codeCommune: '97411'
                            codePostal: '97400'
                          description:
                            typeBatiment: IMMEUBLE
                            ancienneteBatiment: EXISTANT
                            quantite: 100
                    - properties:
                        fiche:
                          const: BAR-EN-106v33-4
                      required:
                        - fiche
                - &ref_62
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-EN-107v20-3
                      type: object
                      properties:
                        adresse: *ref_9
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment: *ref_10
                            ancienneteBatiment: *ref_1
                            quantite:
                              title: Surface d'isolant (m²)
                              type: number
                              minimum: 0
                            resistanceThermique:
                              title: Résistance thermmique de l'isolant
                              type: number
                              minimum: 0.5
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - quantite
                            - resistanceThermique
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_11
                          description:
                            typeBatiment: IMMEUBLE
                            ancienneteBatiment: EXISTANT
                            quantite: 100
                            resistanceThermique: 0.5
                    - properties:
                        fiche:
                          const: BAR-EN-107v20-3
                      required:
                        - fiche
                - &ref_63
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-EN-108v37-2
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            ancienneteBatiment: *ref_1
                            quantite:
                              title: Nombre de fermetures
                              description: Nombre de fermetures isolantes posées
                              type: integer
                              minimum: 0
                          required:
                            - ancienneteBatiment
                            - quantite
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            ancienneteBatiment: EXISTANT
                            quantite: 10
                    - properties:
                        fiche:
                          const: BAR-EN-108v37-2
                      required:
                        - fiche
                - &ref_64
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-EN-109v24-1
                      type: object
                      properties:
                        adresse: *ref_9
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment: *ref_10
                            ancienneteBatiment: *ref_1
                            quantite:
                              title: Surface de toiture protégée (m²)
                              type: number
                              minimum: 0
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - quantite
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: IMMEUBLE
                            ancienneteBatiment: EXISTANT
                            quantite: 500
                    - properties:
                        fiche:
                          const: BAR-EN-109v24-1
                      required:
                        - fiche
                - &ref_65
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-EN-110v35-1
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            ancienneteBatiment: *ref_1
                            quantite:
                              title: Nombre de fenêtres
                              description: >-
                                Nombre de fenêtres ou portes-fenêtres complètes
                                pariétodynamiques posée
                              type: integer
                              minimum: 0
                          required:
                            - ancienneteBatiment
                            - quantite
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            ancienneteBatiment: EXISTANT
                            quantite: 200
                    - properties:
                        fiche:
                          const: BAR-EN-110v35-1
                      required:
                        - fiche
                - &ref_66
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-EQ-110v15-1
                      type: object
                      properties:
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            ancienneteBatiment: *ref_1
                            quantite:
                              title: Nombre de luminaires
                              type: integer
                              minimum: 0
                            indiceProtectionChocs:
                              $id: >-
                                https://schemas.ceeconnect.fr/enums/bar/indice_protection_chocs
                              $schema: https://json-schema.org/draft/2020-12/schema
                              $comment: >-
                                https://www.seton.fr/media/cms/files/stfr/DMEU_TDS_2584_std.lang.all.pdf
                              title: Indice de de protection aux chocs
                              type: string
                              oneOf:
                                - &ref_13
                                  const: '00'
                                  title: '00'
                                - &ref_14
                                  const: '01'
                                  title: '01'
                                - &ref_15
                                  const: '02'
                                  title: '02'
                                - &ref_16
                                  const: '03'
                                  title: '03'
                                - &ref_17
                                  const: '04'
                                  title: '04'
                                - &ref_18
                                  const: '05'
                                  title: '05'
                                - &ref_19
                                  const: '06'
                                  title: '06'
                                - &ref_20
                                  const: '07'
                                  title: '07'
                                - &ref_21
                                  const: '08'
                                  title: '08'
                                - &ref_22
                                  const: '09'
                                  title: '09'
                                - &ref_12
                                  const: '10'
                                  title: '10'
                              $defs:
                                '10': *ref_12
                                '00': *ref_13
                                '01': *ref_14
                                '02': *ref_15
                                '03': *ref_16
                                '04': *ref_17
                                '05': *ref_18
                                '06': *ref_19
                                '07': *ref_20
                                '08': *ref_21
                                '09': *ref_22
                            detecteurLumiere:
                              title: Présence d'un détecteur de lumière
                              type: boolean
                            detecteurPresence:
                              title: Présence d'un détecteur de présence
                              type: boolean
                          required:
                            - ancienneteBatiment
                            - quantite
                            - indiceProtectionChocs
                            - detecteurLumiere
                            - detecteurPresence
                      required:
                        - description
                      examples:
                        - description:
                            ancienneteBatiment: EXISTANT
                            detecteurLumiere: true
                            detecteurPresence: false
                            quantite: 50
                            indiceProtectionChocs: '08'
                    - properties:
                        fiche:
                          const: BAR-EQ-110v15-1
                      required:
                        - fiche
                - &ref_67
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-EQ-115v28-1
                      typeBatiment: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment: &ref_24
                              title: Type de logement
                              type: string
                              oneOf:
                                - *ref_23
                                - &ref_28
                                  title: Appartement
                                  const: APPARTEMENT
                            ancienneteBatiment: *ref_1
                            surfaceHabitable:
                              title: Surface habitable du logement (m²)
                              type: number
                              minimum: 0
                            optionSuiviConfort:
                              title: Option suivi de confort
                              type: boolean
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - surfaceHabitable
                            - optionSuiviConfort
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            surfaceHabitable: 100
                            optionSuiviConfort: true
                    - properties:
                        fiche:
                          const: BAR-EQ-115v28-1
                      required:
                        - fiche
                - &ref_68
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-SE-104v19-1
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Immeuble collectif
                              const: IMMEUBLE
                            ancienneteBatiment: *ref_1
                            logements:
                              title: Nombre d'appartements
                              description: >-
                                Nombre d'appartements raccordés à l'installation
                                collective de chauffage
                              type: integer
                              minimum: 0
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - logements
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: IMMEUBLE
                            ancienneteBatiment: EXISTANT
                            logements: 10
                    - properties:
                        fiche:
                          const: BAR-SE-104v19-1
                      required:
                        - fiche
                - &ref_69
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-SE-105v28-1
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Immeuble collectif
                              const: IMMEUBLE
                            ancienneteBatiment: *ref_1
                            logements:
                              title: Nombre d'appartements
                              description: >-
                                Nombre d'appartements raccordés à l'installation
                                collective de chauffage
                              type: integer
                              minimum: 0
                            dureeGarantie:
                              title: Durée de garantie
                              description: >-
                                Durée de garantie du contrat de performance
                                énergétique
                              type: integer
                              minimum: 2
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - logements
                            - dureeGarantieCpe
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse:
                            banId: '06088_3250_00005'
                            numero: '5'
                            voie: Rue de l'Hôtel de Ville
                            commune: Nice
                            codeCommune: '06300'
                            codePostal: '06088'
                          description:
                            typeBatiment: IMMEUBLE
                            ancienneteBatiment: EXISTANT
                            logements: 20
                            dureeGarantie: 2
                    - properties:
                        fiche:
                          const: BAR-SE-105v28-1
                      required:
                        - fiche
                - &ref_70
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-SE-106v32-1
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment: *ref_24
                            consommationSuivie:
                              $id: >-
                                https://schemas.ceeconnect.fr/enums/bar/consommation_suivie
                              $schema: https://json-schema.org/draft/2020-12/schema
                              title: Nature des consommations suivies
                              type: string
                              oneOf:
                                - &ref_25
                                  const: CHAUFFAGE_ELECTRIQUE
                                  title: Chauffage électrique
                                - &ref_26
                                  const: CHAUFFAGE_GAZ
                                  title: Chauffage gaz
                                - &ref_27
                                  const: ELECTRICITE_SPECIFIQUE
                                  title: Électricité spécifique
                              $defs:
                                CHAUFFAGE_ELECTRIQUE: *ref_25
                                CHAUFFAGE_GAZ: *ref_26
                                ELECTRICITE_SPECIFIQUE: *ref_27
                          required:
                            - typeBatiment
                            - consommationSuivie
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse:
                            banId: '84007_2653'
                            voie: Place de l'Horloge
                            commune: Avignon
                            codeCommune: '84000'
                            codePostal: '84007'
                          description:
                            typeBatiment: MAISON
                            consommationSuivie: CHAUFFAGE_ELECTRIQUE
                    - properties:
                        fiche:
                          const: BAR-SE-106v32-1
                      required:
                        - fiche
                - &ref_71
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-SE-107v37-1
                      type: object
                      properties:
                        adresse: *ref_0
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Immeuble collectif
                              const: IMMEUBLE
                            ancienneteBatiment: *ref_1
                            logements:
                              title: Nombre d'appartements
                              description: >-
                                Nombre d'appartements raccordés à un réseau de
                                chaleur
                              type: integer
                              minimum: 0
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - logements
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: IMMEUBLE
                            ancienneteBatiment: EXISTANT
                            logements: 20
                    - properties:
                        fiche:
                          const: BAR-SE-107v37-1
                      required:
                        - fiche
                - &ref_72
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-SE-108v48-1
                      type: object
                      properties:
                        adresse: *ref_0
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment: *ref_24
                            ancienneteBatiment: *ref_1
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                    - properties:
                        fiche:
                          const: BAR-SE-108v48-1
                      required:
                        - fiche
                - &ref_73
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-101v17-1
                      type: object
                      properties:
                        adresse: *ref_0
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Maison individuelle
                              const: MAISON
                            ancienneteBatiment: *ref_1
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                    - properties:
                        fiche:
                          const: BAR-TH-101v17-1
                      required:
                        - fiche
                - &ref_74
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-102v17-1
                      type: object
                      properties:
                        adresse: *ref_0
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Immeuble collectif
                              const: IMMEUBLE
                            ancienneteBatiment: *ref_1
                            besoinEauChaudeSanitaire:
                              title: Besoin annuel d'ECS (kWh/an)
                              description: >-
                                Besoin annuel d'eau chaude sanitaire à produire
                                par l'énergie solaire
                              type: number
                              minimum: 0
                            productionSolaireUtile:
                              title: Production solaire utile (kWh/an)
                              type: number
                              minimum: 0
                            tauxCouverture:
                              title: Taux de couverture (%)
                              description: >-
                                Taux de couverture du chauffe-eau solaire
                                collectif (%)
                              minimum: 0
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - besoinEauChaudeSanitaire
                            - productionSolaireUtile
                            - tauxCouverture
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            besoinEauChaudeSanitaire: 100000
                            productionSolaireUtile: 80000
                            tauxCouverture: 80
                    - properties:
                        fiche:
                          const: BAR-TH-102v17-1
                      required:
                        - fiche
                - &ref_75
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-104v41-3
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment: *ref_24
                            ancienneteBatiment: *ref_1
                            surfaceChauffee:
                              title: Surface chauffée par la pompe à chaleur
                              type: number
                              minimum: 0
                            performanceEnergetique:
                              title: Efficacité énergétique saisonnière
                              type: number
                              minimum: 102
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - surfaceChauffee
                            - performanceEnergetique
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            surfaceChauffee: 100
                            performanceEnergetique: 110
                    - properties:
                        fiche:
                          const: BAR-TH-104v41-3
                      required:
                        - fiche
                - &ref_76
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-106v23-2
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment: *ref_24
                            ancienneteBatiment: *ref_1
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                          allOf:
                            - if:
                                properties:
                                  typeBatiment: *ref_23
                                required:
                                  - typeBatiment
                              then:
                                properties:
                                  surfaceHabitable:
                                    title: Surface habitable du logement (m²)
                                    type: number
                                    minimum: 0
                                required:
                                  - surfaceHabitable
                            - if:
                                properties:
                                  typeBatiment: *ref_28
                                required:
                                  - typeBatiment
                              then:
                                properties:
                                  logements:
                                    title: Nombre d'appartements
                                    type: integer
                                    minimum: 0
                                required:
                                  - logements
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            surfaceHabitable: 100
                    - properties:
                        fiche:
                          const: BAR-TH-106v23-2
                      required:
                        - fiche
                - &ref_77
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-107-SEv14-1
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Immeuble collectif
                              const: IMMEUBLE
                            ancienneteBatiment: *ref_1
                            logements:
                              title: Nombre d'appartements
                              description: >-
                                Nombre d'appartements raccordés à la chaudière
                                collective
                              type: integer
                              minimum: 0
                            puissanceNominale:
                              title: Puissance nominale (kW)
                              description: >-
                                Puissance nominale de la chaudière collective en
                                kW
                              type: integer
                              minimum: 0
                            puissanceEligibleAutresFiches:
                              title: >-
                                Puissance totale de la pompe à chaleur installée
                                (kW)
                              description: >-
                                Puissance nominale totale des chaudières
                                nouvellement installés respectant les conditions
                                des fiches d'opérations standardisées en vigueur
                              type: number
                              minimum: 0
                            puissanceEligible:
                              title: >-
                                Puissance nominale totale des chaudières
                                nouvellement installées (kW)
                              type: number
                              minimum: 0
                            puissanceChaufferie:
                              title: >-
                                Puissance nominale totale de la chaufferie après
                                travaux (kW)
                              type: number
                              minimum: 0
                            dureeContrat:
                              title: Durée du contrat
                              type: integer
                              minimum: 1
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - logements
                            - puissanceNominale
                            - puissanceEligibleAutresFiches
                            - dureeContrat
                          allOf:
                            - if:
                                properties:
                                  puissanceEligibleAutresFiches:
                                    type: number
                                    exclusiveMinimum: 0
                                required:
                                  - puissanceEligibleAutresFiches
                                  - puissanceChaufferie
                              then:
                                required:
                                  - puissanceEligible
                                  - puissanceChaufferie
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            logements: 50
                            puissanceNominale: 100
                            dureeContrat: 10
                    - properties:
                        fiche:
                          const: BAR-TH-107-SEv14-1
                      required:
                        - fiche
                - &ref_78
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      $comment: 'TODO : données d''entrée pour le calcul du coefficient R'
                      title: BAR-TH-107v14-1
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Immeuble collectif
                              const: IMMEUBLE
                            ancienneteBatiment: *ref_1
                            logements:
                              title: Nombre d'appartements
                              description: >-
                                Nombre d'appartements raccordés à la chaudière
                                collective
                              type: integer
                              minimum: 0
                            puissanceNominale:
                              title: Puissance nominale (kW)
                              description: >-
                                Puissance nominale de la chaudière collective en
                                kW
                              type: integer
                              minimum: 0
                            puissanceEligibleAutresFiches:
                              title: >-
                                Puissance totale de la pompe à chaleur installée
                                (kW)
                              description: >-
                                Puissance nominale totale des chaudières
                                nouvellement installés respectant les conditions
                                des fiches d'opérations standardisées en vigueur
                              type: number
                              minimum: 0
                            puissanceEligible:
                              title: >-
                                Puissance nominale totale des chaudières
                                nouvellement installées (kW)
                              type: number
                              minimum: 0
                            puissanceChaufferie:
                              title: >-
                                Puissance nominale totale de la chaufferie après
                                travaux (kW)
                              type: number
                              minimum: 0
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - logements
                            - puissanceNominale
                            - puissanceEligibleAutresFiches
                          allOf:
                            - if:
                                properties:
                                  puissanceEligibleAutresFiches:
                                    type: number
                                    exclusiveMinimum: 0
                                required:
                                  - puissanceEligibleAutresFiches
                                  - puissanceChaufferie
                              then:
                                required:
                                  - puissanceEligible
                                  - puissanceChaufferie
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            logements: 50
                            puissanceNominale: 100
                    - properties:
                        fiche:
                          const: BAR-TH-107v14-1
                      required:
                        - fiche
                - &ref_79
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-110v16-1
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment: *ref_24
                            ancienneteBatiment: *ref_1
                            quantite:
                              title: Nombre de radiateurs
                              type: integer
                              minimum: 0
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - quantite
                          allOf:
                            - if:
                                properties:
                                  typeBatiment: *ref_28
                                required:
                                  - typeBatiment
                              then:
                                properties:
                                  typeInstallationChauffage:
                                    title: Type d'installation de chauffage
                                    $id: >-
                                      https://schemas.ceeconnect.fr/enums/bar/type_installation
                                    $schema: >-
                                      https://json-schema.org/draft/2020-12/schema
                                    type: string
                                    oneOf: &ref_32
                                      - &ref_29
                                        const: INDIVIDUEL
                                        title: Installation individuelle
                                      - &ref_30
                                        const: COLLECTIF
                                        title: Installation collective
                                    $defs: &ref_33
                                      INDIVIDUEL: *ref_29
                                      COLLECTIF: *ref_30
                                required:
                                  - typeInstallationChauffage
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: APPARTEMENT
                            ancienneteBatiment: EXISTANT
                            typeInstallationChauffage: COLLECTIF
                            quantite: 10
                    - properties:
                        fiche:
                          const: BAR-TH-110v16-1
                      required:
                        - fiche
                - &ref_80
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-111v17-1
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Maison individuelle
                              const: MAISON
                            ancienneteBatiment: *ref_1
                            energieChauffage:
                              title: Energie de chauffage principale
                              type: string
                              oneOf: *ref_31
                            surfaceHabitable:
                              title: Surface habitable du logement (m²)
                              type: number
                              minimum: 0
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - energieChauffage
                            - surfaceHabitable
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            energieChauffage: ELECTRICITE
                            surfaceHabitable: 100
                    - properties:
                        fiche:
                          const: BAR-TH-111v17-1
                      required:
                        - fiche
                - &ref_81
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-112v46-3
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Maison individuelle
                              const: MAISON
                            ancienneteBatiment: *ref_1
                            performanceEnergetique:
                              title: Efficacité énergétique saisonnière
                              type: number
                              minimum: 66
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - performanceEnergetique
                      required:
                        - adresse
                        - description
                      exemples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            performanceEnergetique: 70
                    - properties:
                        fiche:
                          const: BAR-TH-112v46-3
                      required:
                        - fiche
                - &ref_82
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-113v41-3
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Maison individuelle
                              const: MAISON
                            ancienneteBatiment: *ref_1
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                    - properties:
                        fiche:
                          const: BAR-TH-113v41-3
                      required:
                        - fiche
                - &ref_83
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-116v17-1
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment: *ref_24
                            ancienneteBatiment: *ref_1
                            surfaceChauffee:
                              title: Surface chauffée par le plancher chauffant (m²)
                              type: number
                              minimum: 0
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - surfaceChauffee
                          allOf:
                            - if:
                                properties:
                                  typeBatiment: *ref_28
                                required:
                                  - typeBatiment
                              then:
                                properties:
                                  typeInstallationChauffage:
                                    title: Type d'installation de chauffage
                                    $id: >-
                                      https://schemas.ceeconnect.fr/enums/bar/type_installation
                                    $schema: >-
                                      https://json-schema.org/draft/2020-12/schema
                                    type: string
                                    oneOf: *ref_32
                                    $defs: *ref_33
                                required:
                                  - typeInstallationChauffage
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            surfaceChauffee: 100
                    - properties:
                        fiche:
                          const: BAR-TH-116v17-1
                      required:
                        - fiche
                - &ref_84
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-117v14-1
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment: *ref_24
                            ancienneteBatiment: *ref_1
                            quantite:
                              title: Nombre de robinets thermostatiques installés
                              type: integer
                              minimum: 0
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - quantite
                          allOf:
                            - if:
                                properties:
                                  typeBatiment: *ref_28
                                required:
                                  - typeBatiment
                              then:
                                properties:
                                  typeInstallationChauffage:
                                    title: Type d'installation de chauffage
                                    $id: >-
                                      https://schemas.ceeconnect.fr/enums/bar/type_installation
                                    $schema: >-
                                      https://json-schema.org/draft/2020-12/schema
                                    type: string
                                    oneOf: *ref_32
                                    $defs: *ref_33
                                required:
                                  - typeInstallationChauffage
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            quantite: 10
                    - properties:
                        fiche:
                          const: BAR-TH-117v14-1
                      required:
                        - fiche
                - &ref_85
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-118v14-1
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment: *ref_24
                            ancienneteBatiment: *ref_1
                            energieChauffage:
                              title: Energie de chauffage principale
                              type: string
                              oneOf: *ref_31
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - energieChauffage
                          allOf:
                            - if:
                                properties:
                                  typeBatiment: *ref_23
                                required:
                                  - typeBatiment
                              then:
                                properties:
                                  energieChauffage:
                                    title: Energie de chauffage principale
                                    type: string
                                    oneOf: *ref_31
                                  surfaceChauffee:
                                    title: >-
                                      Surface chauffée par le système de
                                      chauffage existant
                                    type: number
                                    minimum: 0
                                required:
                                  - energieChauffage
                                  - surfaceChauffee
                            - if:
                                properties:
                                  typeBatiment: *ref_28
                                required:
                                  - typeBatiment
                              then:
                                properties:
                                  typeInstallationChauffage:
                                    title: Type d'installation de chauffage
                                    $id: >-
                                      https://schemas.ceeconnect.fr/enums/bar/type_installation
                                    $schema: >-
                                      https://json-schema.org/draft/2020-12/schema
                                    type: string
                                    oneOf: *ref_32
                                    $defs: *ref_33
                                required:
                                  - typeInstallationChauffage
                            - if:
                                properties:
                                  typeInstallationChauffage: *ref_30
                                required:
                                  - typeInstallationChauffage
                              then:
                                properties:
                                  logements:
                                    title: >-
                                      Nombre d'appartements raccordés à la
                                      chaudière collective
                                    type: integer
                                    minimum: 0
                                required:
                                  - logements
                              else:
                                properties:
                                  energieChauffage:
                                    title: Energie de chauffage principale
                                    type: string
                                    oneOf: *ref_31
                                required:
                                  - energieChauffage
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            energieChauffage: COMBUSTIBLES
                            surfaceChauffee: 100
                    - properties:
                        fiche:
                          const: BAR-TH-118v14-1
                      required:
                        - fiche
                - &ref_86
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      $comment: 'TODO : Données d''entrée pour le calcul du coefficient R'
                      title: BAR-TH-122v15-1
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Immeuble collectif
                              const: IMMEUBLE
                            ancienneteBatiment: *ref_1
                            logements:
                              title: >-
                                Nombre d'appartements raccordés à la chaudière
                                collective
                              type: integer
                              minimum: 0
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - logements
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            logements: 10
                    - properties:
                        fiche:
                          const: BAR-TH-122v15-1
                      required:
                        - fiche
                - &ref_87
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-123v17-1
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Immeuble collectif
                              const: IMMEUBLE
                            ancienneteBatiment: *ref_1
                            logements:
                              title: >-
                                Nombre d'appartements raccordés à la chaudière
                                collective
                              type: integer
                              minimum: 0
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - logements
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            logements: 10
                    - properties:
                        fiche:
                          const: BAR-TH-123v17-1
                      required:
                        - fiche
                - &ref_88
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-124v35-3
                      type: object
                      properties:
                        adresse: *ref_9
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Maison individuelle
                              const: MAISON
                            ancienneteBatiment: *ref_1
                            surfaceCapteurs:
                              title: Surface des capteurs solaires (m²)
                              type: number
                              minimum: 0
                              maximum: 40
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - surfaceCapteurs
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            surfaceCapteurs: 10
                    - properties:
                        fiche:
                          const: BAR-TH-124v35-3
                      required:
                        - fiche
                - &ref_89
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-125v40-4
                      type: object
                      properties:
                        adresse: *ref_0
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            ancienneteBatiment: *ref_1
                            typeInstallation:
                              title: Type d'installation
                              $id: >-
                                https://schemas.ceeconnect.fr/enums/bar/type_installation
                              $schema: https://json-schema.org/draft/2020-12/schema
                              type: string
                              oneOf: *ref_32
                              $defs: *ref_33
                            typeBatiment: *ref_24
                          required:
                            - ancienneteBatiment
                            - typeInstallation
                          allOf:
                            - if:
                                properties:
                                  typeInstallation: *ref_29
                                required:
                                  - typeInstallation
                              then:
                                properties:
                                  typeEquipement:
                                    title: Type de VMC double flux
                                    type: string
                                    oneOf:
                                      - const: AUTOREGLABLE
                                        title: VMC autoréglable
                                      - const: MODULE
                                        title: VMC modulée
                                  surfaceHabitable:
                                    title: Surface habitable du logement (m²)
                                    type: number
                                    minimum: 0
                                required:
                                  - typeEquipement
                                  - surfaceHabitable
                            - if:
                                properties:
                                  typeInstallation: *ref_30
                                required:
                                  - typeInstallation
                              then:
                                properties:
                                  typeEquipement:
                                    const: AUTOREGLABLE
                                    title: VMC autoréglable
                                  logements:
                                    title: >-
                                      Nombre de logements raccordés à la VMC
                                      double flux
                                    type: integer
                                    minimum: 0
                                required:
                                  - typeEquipement
                                  - logements
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            ancienneteBatiment: EXISTANT
                            typeInstallation: INDIVIDUEL
                            typeEquipement: AUTOREGLABLE
                            surfaceHabitable: 100
                    - properties:
                        fiche:
                          const: BAR-TH-125v40-4
                      required:
                        - fiche
                - &ref_90
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-125v54-5
                      type: object
                      properties:
                        adresse: *ref_0
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            ancienneteBatiment: *ref_1
                            typeInstallation:
                              title: Type d'installation
                              $id: >-
                                https://schemas.ceeconnect.fr/enums/bar/type_installation
                              $schema: https://json-schema.org/draft/2020-12/schema
                              type: string
                              oneOf: *ref_32
                              $defs: *ref_33
                            typeEquipement:
                              title: Type de VMC simple flux
                              type: string
                              oneOf: &ref_41
                                - const: TYPE_A
                                  title: VMC hygroréglable de type A
                                - const: TYPE_B
                                  title: VMC hygroréglable de type B
                            typeBatiment: &ref_38
                              $id: >-
                                https://schemas.ceeconnect.fr/enums/bar/type_batiment
                              $schema: https://json-schema.org/draft/2020-12/schema
                              title: Type de bâtiment
                              type: string
                              oneOf:
                                - *ref_23
                                - *ref_28
                                - *ref_34
                              $defs:
                                MAISON: *ref_23
                                APPARTEMENT: *ref_28
                                IMMEUBLE: *ref_34
                                individuel: *ref_24
                                collectif: &ref_44
                                  title: Type de bâtiment
                                  type: string
                                  oneOf:
                                    - *ref_34
                                    - *ref_28
                                batiment: *ref_10
                          required:
                            - ancienneteBatiment
                            - typeInstallation
                            - typeEquipement
                          allOf:
                            - if:
                                properties:
                                  typeInstallation: *ref_29
                                required:
                                  - typeInstallation
                              then:
                                properties:
                                  typeCaisson:
                                    title: Type de caisson
                                    type: string
                                    oneOf:
                                      - &ref_35
                                        const: BASSE_CONSOMMATION
                                        title: Caisson basse consommation
                                  surfaceHabitable:
                                    title: Surface habitable du logement (m²)
                                    type: number
                                    minimum: 0
                                required:
                                  - typeCaisson
                                  - surfaceHabitable
                            - if:
                                properties:
                                  typeInstallation: *ref_30
                                required:
                                  - typeInstallation
                              then:
                                properties:
                                  typeCaisson:
                                    title: Type de caisson
                                    $id: >-
                                      https://schemas.ceeconnect.fr/enums/bar/type_caisson_vmc
                                    $schema: >-
                                      https://json-schema.org/draft/2020-12/schema
                                    description: >-
                                      Type de caisson pour ventilation mécanique
                                      centralisée
                                    type: string
                                    oneOf:
                                      - *ref_35
                                      - &ref_36
                                        const: STANDARD
                                        title: Caisson standard
                                      - &ref_37
                                        const: BASSE_PRESSION
                                        title: Caisson basse pression
                                    $defs:
                                      BASSE_CONSOMMATION: *ref_35
                                      STANDARD: *ref_36
                                      BASSE_PRESSION: *ref_37
                                  logements:
                                    title: >-
                                      Nombre de logements raccordés à la VMC
                                      simple flux
                                    type: integer
                                    minimum: 0
                                required:
                                  - typeCaisson
                                  - logements
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            ancienneteBatiment: EXISTANT
                            typeInstallation: INDIVIDUEL
                            typeCaisson: BASSE_CONSOMMATION
                            surfaceHabitable: 100
                    - properties:
                        fiche:
                          const: BAR-TH-127v40-4
                      required:
                        - fiche
                - &ref_91
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-129v27-3
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment: *ref_24
                            ancienneteBatiment: *ref_1
                            surfaceChauffee:
                              title: Surface chauffée par la pompe à chaleur (m²)
                              type: number
                              minimum: 0
                            performanceEnergetique:
                              title: Coefficient de performance saisonnier
                              type: number
                              minimum: 3.9
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - surfaceChauffee
                            - performanceEnergetique
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            sperformanceEnergetique: 4.7
                            surfaceChauffee: 100
                    - properties:
                        fiche:
                          const: BAR-TH-129v27-3
                      required:
                        - fiche
                - &ref_92
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-130v26-1
                      type: object
                      properties:
                        adresse: *ref_0
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment: *ref_38
                            ancienneteBatiment: *ref_1
                            extensionBatiment:
                              title: >-
                                L'opération concerne une partie nouvelle d'un
                                bâtiment existant
                              type: boolean
                            energieChauffage:
                              title: Energie de chauffage principale
                              type: string
                              oneOf: *ref_31
                            energieEauChaudeSanitaire:
                              title: Energie de production de l'eau chaude sanitaire
                              oneOf:
                                - *ref_39
                                - *ref_40
                                - const: HYBRIDE
                                  title: Module hybride
                            surfaceThermique:
                              title: Surface thermique (m²)
                              description: >-
                                Surface thermique du bâtiment au sens de la
                                règlementation thermique
                              type: number
                              minimum: 0
                            cefBat:
                              title: Consommation finale du bâtiment (kWh/m²/an)
                              description: >-
                                Consommation conventionnelle du bâtiment
                                exprimée en énergie finale
                              type: number
                            cepMax:
                              title: Consommation primaire maximale (kWh/m²/an)
                              description: >-
                                Consommation conventionnelle exprimée en énergie
                                finale maximale
                              type: number
                          required:
                            - energieChauffage
                            - energieEauChaudeSanitaire
                            - surfaceThermique
                            - cefBat
                            - cepMax
                          anyOf:
                            - properties:
                                ancienneteBatiment:
                                  const: NEUF
                                  title: Moins de 2 ans
                                extensionBatiment:
                                  type: boolean
                                  const: false
                              required:
                                - ancienneteBatiment
                                - extensionBatiment
                            - properties:
                                ancienneteBatiment:
                                  title: >-
                                    Bâtiment de plus de deux ans à la date
                                    d'engagement de l'opération
                                  const: EXISTANT
                                extensionBatiment:
                                  type: boolean
                                  const: true
                              required:
                                - ancienneteBatiment
                                - extensionBatiment
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: NEUF
                            extensionBatiment: false
                            energieChauffage: ELECTRICITE
                            energieEcs: ELECTRICITE
                            surfaceThermique: 120
                            cefBat: 20
                            cepMax: 50
                    - properties:
                        fiche:
                          const: BAR-TH-130v26-1
                      required:
                        - fiche
                - &ref_93
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-135v35-2
                      type: object
                      properties:
                        adresse: *ref_9
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Immeuble collectif
                              const: IMMEUBLE
                            ancienneteBatiment: *ref_1
                            typeEquipement:
                              title: Type de chauffe-eau solaire
                              type: string
                              oneOf:
                                - const: CESC
                                  title: Chauffe-eau solaire à appoint centralisé
                                - const: CESCI
                                  title: Chauffe-eau solaire à appoint individualisé
                            besoinEauChaudeSanitaire:
                              title: Besoin annuel d'eau chaude sanitaire (kWh/an)
                              description: >-
                                Besoin annuel en eau chaude sanitaire à produire
                                par l'énergie solaire exprimé en kWh par an et
                                issu de l'étude de dimensionnemen
                              type: number
                              minimum: 0
                            tauxCouverture:
                              title: Taux de couverture solaire (%)
                              description: >-
                                Indiquer le taux de couverture par l'énergie
                                solaire de l'installation issu de l'étude de
                                dimensionnement
                              type: number
                              minimum: 0
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - typeEquipement
                            - besoinEauChaudeSanitaire
                            - tauxCouverture
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_11
                          description:
                            typeBatiment: IMMEUBLE
                            ancienneteBatiment: EXISTANT
                            typeEquipement: CESCI
                            besoinEauChaudeSanitaire: 100000
                            tauxCouverture: 80
                    - properties:
                        fiche:
                          const: BAR-TH-135v35-2
                      required:
                        - fiche
                - &ref_94
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-137v45-3
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment: *ref_10
                            ancienneteBatiment: *ref_1
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                          allOf:
                            - if:
                                properties:
                                  typeBatiment: *ref_23
                                required:
                                  - typeBatiment
                              then:
                                properties:
                                  surfaceHabitable:
                                    title: Surface habitable (m²)
                                    type: number
                                    minimum: 0
                                required:
                                  - surfaceHabitable
                            - if:
                                properties:
                                  typeBatiment: *ref_34
                                required:
                                  - typeBatiment
                              then:
                                properties:
                                  logements:
                                    title: >-
                                      Nombre d'appartements raccordés au réseau
                                      de chaleur
                                    type: integer
                                    minimum: 0
                                required:
                                  - logements
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            surfaceHabitable: 100
                    - properties:
                        fiche:
                          const: BAR-TH-137v45-3
                      required:
                        - fiche
                - &ref_95
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-139v23-2
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Immeuble collectif
                              const: IMMEUBLE
                            ancienneteBatiment: *ref_1
                            puissanceNominale:
                              title: Puissance nominale du moteur de la pompe (kW)
                              type: number
                              minimum: 0.75
                              maximum: 375
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - puissanceNominale
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: IMMEUBLE
                            ancienneteBatiment: EXISTANT
                            puissanceNominale: 50
                    - properties:
                        fiche:
                          const: BAR-TH-139v23-2
                      required:
                        - fiche
                - &ref_96
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-141v15-1
                      type: object
                      properties:
                        adresse: *ref_9
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment: *ref_24
                            ancienneteBatiment: *ref_1
                            quantite:
                              title: Nombre de climatiseurs
                              description: >-
                                Nombre de climatiseurs dont les caractéristiques
                                techniques sont identiques
                              type: integer
                              minimum: 1
                            puissanceFrigorifique:
                              title: Puissance frigorifique (BTU/h)
                              type: number
                              enum:
                                - 7000
                                - 9000
                            performanceEnergetique:
                              title: Coefficient d'éfficacité énergétique saisonnier
                              type: string
                              oneOf:
                                - const: A+++
                                  title: A+++
                                - const: A++
                                  title: A++
                                - const: A+
                                  title: A+
                                - const: A
                                  title: A
                              examples:
                                - A+++
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - quantite
                            - puissanceFrigorifique
                            - performanceEnergetique
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_11
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            quantite: 5
                            puissanceFrigorifique: 7000
                            performanceEnergetique: 5.1
                    - properties:
                        fiche:
                          const: BAR-TH-141v15-1
                      required:
                        - fiche
                - &ref_97
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-143v25-1
                      type: object
                      properties:
                        adresse: *ref_0
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Maison individuelle
                              const: MAISON
                            ancienneteBatiment: *ref_1
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                    - properties:
                        fiche:
                          const: BAR-TH-143v25-1
                      required:
                        - fiche
                - &ref_98
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-143v51-5
                      type: object
                      properties:
                        adresse: *ref_0
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Maison individuelle
                              const: MAISON
                            ancienneteBatiment: *ref_1
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                    - properties:
                        fiche:
                          const: BAR-TH-143v51-5
                      required:
                        - fiche
                - &ref_99
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-145v36-3
                      type: object
                      properties:
                        adresse: *ref_0
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Immeuble collectif
                              const: IMMEUBLE
                            ancienneteBatiment: *ref_1
                            surfaceHabitable:
                              title: Surface habitable (m²)
                              type: number
                              minimum: 0
                            cefInitial:
                              title: >-
                                Consommation conventionnelle avant travaux
                                (kWh/m²/an)
                              type: number
                              minimum: 0
                            cefProjet:
                              title: >-
                                Consommation conventionnelle après travaux
                                (kWh/m²/an)
                              type: number
                              minimum: 0
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - surfaceHabitable
                            - cefInitial
                            - cefProjet
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            surfaceHabitable: 2000
                            cefInitial: 400
                            cefProjet: 200
                    - properties:
                        fiche:
                          const: BAR-TH-145v36-3
                      required:
                        - fiche
                - &ref_100
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-148v15-2
                      type: object
                      properties:
                        adresse: *ref_0
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment: *ref_24
                            ancienneteBatiment: *ref_1
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                      required:
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                    - properties:
                        fiche:
                          const: BAR-TH-148v15-2
                      required:
                        - fiche
                - &ref_101
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-150v14-1
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Immeuble collectif
                              const: IMMEUBLE
                            ancienneteBatiment: *ref_1
                            logements:
                              title: >-
                                Nombre d'appartements raccordés à la pompe à
                                chaleur
                              type: integer
                              minimum: 0
                            usage:
                              titles: Usages couverts par la pompe à chaleur
                              title: Type d'usage
                              type: string
                              oneOf: &ref_49
                                - const: CHAUFFAGE
                                  title: Chauffage
                                - const: CHAUFFAGE_ECS
                                  title: Chauffage et eau chaude sanitaire
                            puissanceNominale:
                              title: Puissance nominale de l'équipement (kW)
                              type: integer
                              minimum: 0
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - logements
                            - usages
                            - puissanceNominale
                          allOf:
                            - if:
                                properties:
                                  puissanceNominale:
                                    type: number
                                    maximum: 400
                                required:
                                  - puissanceNominale
                              then:
                                properties:
                                  performanceEnergetique:
                                    title: Efficacité énergétique saisonnière (%)
                                    type: number
                                    minimum: 102
                                required:
                                  - performanceEnergetique
                            - if:
                                properties:
                                  puissanceNominale:
                                    type: number
                                    exclusiveMinimum: 400
                                required:
                                  - puissanceNominale
                              then:
                                properties:
                                  performanceEnergetique:
                                    title: Coefficient de performance énergétique
                                    type: number
                                    minimum: 1.3
                                required:
                                  - performanceEnergetique
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            logements: 20
                            usages: CHAUFFAGE
                            puissanceNominale: 300
                            performanceEnergetique: 105
                    - properties:
                        fiche:
                          const: BAR-TH-150v14-1
                      required:
                        - fiche
                - &ref_102
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-155v40-4
                      type: object
                      properties:
                        adresse: *ref_0
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            ancienneteBatiment: *ref_1
                            typeEquipement:
                              title: Type de VMC simple flux
                              type: string
                              oneOf: *ref_41
                            typeExtracteur:
                              title: Type de d'extracteur
                              $id: >-
                                https://schemas.ceeconnect.fr/enums/bar/type_extracteur_vmc
                              $schema: https://json-schema.org/draft/2020-12/schema
                              type: string
                              oneOf:
                                - &ref_42
                                  const: STANDARD
                                  title: Extracteur standard
                                - &ref_43
                                  const: BASSE_CONSOMMATION
                                  title: Extracteur basse consommation
                              $defs:
                                STANDARD: *ref_42
                                BASSE_CONSOMMATION: *ref_43
                            logements:
                              title: >-
                                Nombre de logements raccordés à la VMC double
                                flux
                              type: integer
                              minimum: 0
                            typeBatiment: *ref_44
                          required:
                            - ancienneteBatiment
                            - typeEquipement
                            - typeExtracteur
                            - logements
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            ancienneteBatiment: EXISTANT
                            logements: 20
                            typeEquipement: TYPE_B
                            typeExtracteur: STANDARD
                    - properties:
                        fiche:
                          const: BAR-TH-155v40-4
                      required:
                        - fiche
                - &ref_103
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-158v35-2
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment: *ref_24
                            ancienneteBatiment: *ref_1
                            quantite:
                              title: Nombre d'émetteurs électriques installés
                              type: integer
                              minimum: 0
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - quantite
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            quantite: 10
                    - properties:
                        fiche:
                          const: BAR-TH-158v35-2
                      required:
                        - fiche
                - &ref_104
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-159v44-3
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment: *ref_24
                            ancienneteBatiment: *ref_1
                            surfaceChauffee:
                              title: Surface chauffée par la pompe à chaleur (m²)
                              type: number
                              minimum: 0
                            performanceEnergetique:
                              title: Efficacité énergétique saisonnière
                              type: number
                              minimum: 111
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - surfaceChauffee
                            - performanceEnergetique
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            performanceEnergetique: 120
                            surfaceChauffee: 150
                    - properties:
                        fiche:
                          const: BAR-TH-159v44-3
                      required:
                        - fiche
                - &ref_105
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-159v50-4
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment: *ref_24
                            ancienneteBatiment: *ref_1
                            surfaceChauffee:
                              title: Surface chauffée par la pompe à chaleur (m²)
                              type: number
                              minimum: 0
                            performanceEnergetique:
                              title: Efficacité énergétique saisonnière
                              type: number
                              minimum: 111
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - surfaceChauffee
                            - performanceEnergetique
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            performanceEnergetique: 120
                            surfaceChauffee: 150
                    - properties:
                        fiche:
                          const: BAR-TH-159v50-4
                      required:
                        - fiche
                - &ref_106
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-160v39-2
                      type: object
                      properties:
                        adresse: *ref_0
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Immeuble collectif
                              const: IMMEUBLE
                            ancienneteBatiment: *ref_1
                            quantite:
                              title: >-
                                Longueur isolée du réseau de chauffage ou d'ECS
                                (m)
                              description: >-
                                Indiquer la longueur isolée du réseau de
                                chauffage ou d'ECS hors du volume chauffé en
                                mètre
                              type: number
                              minimum: 0
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - quantite
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            quantite: 50
                    - properties:
                        fiche:
                          const: BAR-TH-160v39-2
                      required:
                        - fiche
                - &ref_107
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-160v50-3
                      type: object
                      properties:
                        adresse: *ref_0
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Immeuble collectif
                              const: IMMEUBLE
                            ancienneteBatiment: *ref_1
                            quantite:
                              title: >-
                                Longueur isolée du réseau de chauffage ou d'ECS
                                (m)
                              description: >-
                                Indiquer la longueur isolée du réseau de
                                chauffage ou d'ECS hors du volume chauffé en
                                mètre
                              type: number
                              minimum: 0
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - quantite
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            quantite: 50
                    - properties:
                        fiche:
                          const: BAR-TH-160v50-3
                      required:
                        - fiche
                - &ref_108
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-161v28-1
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Immeuble collectif
                              const: IMMEUBLE
                            ancienneteBatiment: *ref_1
                            equipements:
                              title: Liste des housses isolantes installées
                              type: array
                              minContains: 1
                              items:
                                type: object
                                properties:
                                  typePointSingulier:
                                    $id: >-
                                      https://schemas.ceeconnect.fr/enums/bar/type_point_singulier
                                    $schema: >-
                                      https://json-schema.org/draft/2020-12/schema
                                    title: Type de points singuliers
                                    type: string
                                    oneOf:
                                      - &ref_45
                                        const: ECHANGEUR
                                        title: Echangeur à plaques
                                      - &ref_46
                                        const: HORS_ECHANGEUR
                                        title: Autres
                                    $defs:
                                      ECHANGEUR: *ref_45
                                      HORS_ECHANGEUR: *ref_46
                                  temperatureFluide:
                                    title: Température du fluide caloporteur (°C)
                                    type: number
                                    minimum: 50
                                  quantite:
                                    title: Nombre de housses isolantes installées
                                    description: >-
                                      Nombre de housses isolantes dont les
                                      caractéristiques sont identiques
                                    type: integer
                                    minimum: 0
                                required:
                                  - typePointSingulier
                                  - temperatureFluide
                                  - quantite
                                allOf:
                                  - if:
                                      properties:
                                        typePointSingulier: *ref_46
                                      required:
                                        - typePointSingulier
                                    then:
                                      properties:
                                        quantite:
                                          title: >-
                                            Nombre de houses isolantes mises en
                                            place
                                        diametre:
                                          title: Diamètre nominal (mm)
                                          type: number
                                          minimum: 20
                                      required:
                                        - quantite
                                        - diametre
                                  - if:
                                      properties:
                                        typePointSingulier: *ref_45
                                      required:
                                        - typePointSingulier
                                    then:
                                      properties:
                                        quantite:
                                          title: Nombre d'échangeurs à plaques isolés
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - equipements
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: IMMEUBLE
                            ancienneteBatiment: EXISTANT
                            equipements:
                              - typePointSingulier: HORS_ECHANGEUR
                                quantite: 5
                                diametre: 20
                                temperatureFluide: 50
                              - typePointSingulier: HORS_ECHANGEUR
                                quantite: 5
                                diametre: 65
                                temperatureFluide: 50
                    - properties:
                        fiche:
                          const: BAR-TH-161v28-1
                      required:
                        - fiche
                - &ref_109
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-162v28-1
                      type: object
                      properties:
                        adresse: *ref_0
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Maison individuelle
                              const: MAISON
                            ancienneteBatiment: *ref_1
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                    - properties:
                        fiche:
                          const: BAR-TH-162v28-1
                      required:
                        - fiche
                - &ref_110
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-163v38-2
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Immeuble collectif
                              const: IMMEUBLE
                            ancienneteBatiment: *ref_1
                            quantite:
                              title: Nombre de chaudières à raccorder au conduit
                              type: integer
                              minimum: 0
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - quantite
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: IMMEUBLE
                            ancienneteBatiment: EXISTANT
                            quantite: 10
                    - properties:
                        fiche:
                          const: BAR-TH-163v38-2
                      required:
                        - fiche
                - &ref_111
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-164v36-2
                      type: object
                      properties:
                        adresse: *ref_0
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Maison individuelle
                              const: MAISON
                            ancienneteBatiment: *ref_1
                            surfaceHabitable:
                              title: Surface habitable (m²)
                              type: number
                              minimum: 0
                            cefInitial:
                              title: >-
                                Consommation d'énergie finale avant travaux
                                (kWhef/m²/an)
                              description: >-
                                Consommation conventionnelle en énergie finale
                                avant les travaux de rénovation issue de l'étude
                                énergétique
                              type: number
                              minimum: 0
                            cefProjet:
                              title: >-
                                Consommation d'énergie finale après travaux
                                (kWhef/m²/an)
                              description: >-
                                Consommation conventionnelle en énergie finale
                                après les travaux de rénovation issue de l'étude
                                énergétique
                              type: number
                              minimum: 0
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - surfaceHabitable
                            - cefInitial
                            - cefProjet
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            surfaceHabitable: 100
                            cefInitial: 60
                            cefProjet: 30
                            cepProjet: 30
                    - properties:
                        fiche:
                          const: BAR-TH-164v36-2
                      required:
                        - fiche
                - &ref_112
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-165v34-1
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Immeuble collectif
                              const: IMMEUBLE
                            ancienneteBatiment: *ref_1
                            puissanceNominale:
                              title: Puissance nominale de la chaudière (kW)
                              type: number
                              minimum: 0
                            quantiteChaleurNette:
                              title: Chaleur produite par la chaudière (kWh/an)
                              description: >-
                                Chaleur nette utile produite par la chaudière
                                issue de l'étude de dimensionnement préalable à
                                la réalisation des travaux
                              type: number
                              minimum: 0
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - puissanceNominale
                            - quantiteChaleurNette
                      required:
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            quantiteChaleurNette: 140000
                            puissanceNominale: 450
                    - properties:
                        fiche:
                          const: BAR-TH-165v34-1
                      required:
                        - fiche
                - &ref_113
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-166v38-1
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Immeuble collectif
                              const: IMMEUBLE
                            ancienneteBatiment: *ref_1
                            logements:
                              title: >-
                                Nombre d'appartements raccordés à la pompe à
                                chaleur
                              type: integer
                              minimum: 0
                            usage:
                              titles: Usages couverts par la pompe à chaleur
                              $id: >-
                                https://schemas.ceeconnect.fr/enums/bar/type_usage
                              $schema: https://json-schema.org/draft/2020-12/schema
                              title: Type d'usage
                              type: string
                              oneOf: &ref_54
                                - &ref_47
                                  const: CHAUFFAGE
                                  title: Chauffage
                                - &ref_48
                                  const: ECS
                                  title: Eau chaude sanitaire
                              $defs: &ref_55
                                CHAUFFAGE: *ref_47
                                ECS: *ref_48
                                CHAUFFAGE_ECS:
                                  const: CHAUFFAGE_ECS
                                  title: Chauffage et eau chaude sanitaire
                                chauffages:
                                  title: Type d'usage
                                  type: string
                                  oneOf: *ref_49
                                ecs:
                                  title: Type d'usage
                                  type: string
                                  oneOf:
                                    - const: ECS
                                      title: Eau chaude sanitaire
                                    - const: CHAUFFAGE_ECS
                                      title: Chauffage et eau chaude sanitaire
                            performanceEnergetique:
                              title: Efficacité énergétique saisonnière
                              type: number
                              minimum: 111
                            puissanceNominale:
                              title: Puissance nominale de l'équipement (kW)
                              type: integer
                              minimum: 0
                            puissanceChaufferie:
                              title: Puissance totale de la chaufferie (kW)
                              description: Puissance totale de la chaufferie après travaux
                              type: number
                              minimum: 0
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - logements
                            - usage
                            - performanceEnergetique
                            - puissanceNominale
                            - puissanceChaufferie
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            logements: 10
                            usage: CHAUFFAGE
                            performanceEnergetique: 111
                    - properties:
                        fiche:
                          const: BAR-TH-166v38-1
                      required:
                        - fiche
                - &ref_114
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-167v38-1
                      type: object
                      properties:
                        adresse: *ref_0
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment: *ref_24
                            ancienneteBatiment: *ref_1
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                          allOf:
                            - if:
                                properties:
                                  typeBatiment: *ref_23
                                required:
                                  - typeBatiment
                              then:
                                properties:
                                  surfaceHabitable:
                                    title: Surface habitable (m²)
                                    type: number
                                    minimum: 0
                                  typeEquipement: &ref_53
                                    $id: >-
                                      https://schemas.ceeconnect.fr/enums/bar/type_chauffe_bain
                                    $schema: >-
                                      https://json-schema.org/draft/2020-12/schema
                                    title: Type de chauffe bain
                                    type: string
                                    oneOf:
                                      - &ref_50
                                        const: FLUX_FORCE_HAUT_RENDEMENT
                                        title: >-
                                          Chauffe bain à flux forcé à haut
                                          rendement
                                      - &ref_51
                                        const: COMBUSTION_HAUT_RENDEMENT
                                        title: >-
                                          Chauffe bain à combustion atmosphérique
                                          à haut rendement
                                      - &ref_52
                                        const: CONDENSATION
                                        title: Chauffe bain à condensation
                                    $defs:
                                      FLUX_FORCE_HAUT_RENDEMENT: *ref_50
                                      COMBUSTION_HAUT_RENDEMENT: *ref_51
                                      CONDENSATION: *ref_52
                                      maison:
                                        title: Type de chauffe bain
                                        type: string
                                        oneOf:
                                          - const: FLUX_FORCE_HAUT_RENDEMENT
                                            title: >-
                                              Chauffe bain à flux forcé à haut
                                              rendement
                                          - const: CONDENSATION
                                            title: Chauffe bain à condensation
                                      appartement:
                                        title: Type de chauffe bain
                                        type: string
                                        oneOf:
                                          - const: FLUX_FORCE_HAUT_RENDEMENT
                                            title: >-
                                              Chauffe bain à flux forcé à haut
                                              rendement
                                          - const: COMBUSTION_HAUT_RENDEMENT
                                            title: >-
                                              Chauffe bain à combustion atmosphérique
                                              à haut rendement
                                          - const: CONDENSATION
                                            title: Chauffe bain à condensation
                                required:
                                  - surfaceHabitable
                                  - typeEquipement
                              else:
                                properties:
                                  typeEquipement: *ref_53
                                required:
                                  - typeEquipement
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            surfaceHabitable: 100
                            typeEquipement: FLUX_FORCE_HAUT_RENDEMENT
                    - properties:
                        fiche:
                          const: BAR-TH-167v38-1
                      required:
                        - fiche
                - &ref_115
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-168v40-1
                      type: object
                      properties:
                        adresse: *ref_0
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Maison individuelle
                              const: MAISON
                            ancienneteBatiment: *ref_1
                            usage:
                              titles: Usages couverts par le dispositif solaire
                              $id: >-
                                https://schemas.ceeconnect.fr/enums/bar/type_usage
                              $schema: https://json-schema.org/draft/2020-12/schema
                              title: Type d'usage
                              type: string
                              oneOf: *ref_54
                              $defs: *ref_55
                            surfaceCapteurs:
                              title: Surface des capteurs solaires
                              type: number
                              minimum: 0
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - usage
                            - surfaceCapteurs
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            usage: ECS
                            surfaceCapteurs: 15
                    - properties:
                        fiche:
                          const: BAR-TH-168v40-1
                      required:
                        - fiche
                - &ref_116
                  allOf:
                    - $schema: https://json-schema.org/draft/2020-12/schema
                      title: BAR-TH-169v46-1
                      type: object
                      properties:
                        adresse: *ref_8
                        description:
                          title: Caractéristiques
                          type: object
                          properties:
                            typeBatiment:
                              title: Immeuble collectif
                              const: IMMEUBLE
                            ancienneteBatiment: *ref_1
                            logements:
                              title: >-
                                Nombre d'appartements raccordés à la pompe à
                                chaleur
                              type: integer
                              minimum: 0
                            performanceEnergetique:
                              title: Coefficient de performance énergétique
                              type: number
                              minimum: 2.8
                            tauxCouverture:
                              title: Taux de couverture (%)
                              description: >-
                                Taux de couverture des besoins d'eau chaude
                                sanitaire par l'équipement installé, issu de la
                                note de dimensionnement rédigé par le
                                professionnel
                              type: number
                              minimum: 0
                              maximum: 100
                          required:
                            - typeBatiment
                            - ancienneteBatiment
                            - logements
                            - performanceEnergetique
                            - tauxCouverture
                      required:
                        - adresse
                        - description
                      examples:
                        - adresse: *ref_2
                          description:
                            typeBatiment: MAISON
                            ancienneteBatiment: EXISTANT
                            logements: 10
                            performanceEnergetique: 3
                            tauxCouverture: 80
                    - properties:
                        fiche:
                          const: BAR-TH-169v46-1
                      required:
                        - fiche
              $defs:
                BAR-EN-101v39-4: *ref_56
                BAR-EN-102v39-2: *ref_57
                BAR-EN-103v39-5: *ref_58
                BAR-EN-104v14-1: *ref_59
                BAR-EN-105v39-3: *ref_60
                BAR-EN-106v33-4: *ref_61
                BAR-EN-107v20-3: *ref_62
                BAR-EN-108v37-2: *ref_63
                BAR-EN-109v24-1: *ref_64
                BAR-EN-110v35-1: *ref_65
                BAR-EQ-110v15-1: *ref_66
                BAR-EQ-115v28-1: *ref_67
                BAR-SE-104v19-1: *ref_68
                BAR-SE-105v28-1: *ref_69
                BAR-SE-106v32-1: *ref_70
                BAR-SE-107v37-1: *ref_71
                BAR-SE-108v48-1: *ref_72
                BAR-TH-101v17-1: *ref_73
                BAR-TH-102v17-1: *ref_74
                BAR-TH-104v41-3: *ref_75
                BAR-TH-106v23-2: *ref_76
                BAR-TH-107-SEv14-1: *ref_77
                BAR-TH-107v14-1: *ref_78
                BAR-TH-110v16-1: *ref_79
                BAR-TH-111v17-1: *ref_80
                BAR-TH-112v46-3: *ref_81
                BAR-TH-113v41-3: *ref_82
                BAR-TH-116v17-1: *ref_83
                BAR-TH-117v14-1: *ref_84
                BAR-TH-118v14-1: *ref_85
                BAR-TH-122v15-1: *ref_86
                BAR-TH-123v17-1: *ref_87
                BAR-TH-124v35-3: *ref_88
                BAR-TH-125v40-4: *ref_89
                BAR-TH-127v40-4: *ref_90
                BAR-TH-129v27-3: *ref_91
                BAR-TH-130v26-1: *ref_92
                BAR-TH-135v35-2: *ref_93
                BAR-TH-137v45-3: *ref_94
                BAR-TH-139v23-2: *ref_95
                BAR-TH-141v15-1: *ref_96
                BAR-TH-143v25-1: *ref_97
                BAR-TH-143v51-5: *ref_98
                BAR-TH-145v36-3: *ref_99
                BAR-TH-148v15-2: *ref_100
                BAR-TH-150v14-1: *ref_101
                BAR-TH-155v40-4: *ref_102
                BAR-TH-158v35-2: *ref_103
                BAR-TH-159v44-3: *ref_104
                BAR-TH-159v50-4: *ref_105
                BAR-TH-160v39-2: *ref_106
                BAR-TH-160v50-3: *ref_107
                BAR-TH-161v28-1: *ref_108
                BAR-TH-162v28-1: *ref_109
                BAR-TH-163v38-2: *ref_110
                BAR-TH-164v36-2: *ref_111
                BAR-TH-165v34-1: *ref_112
                BAR-TH-166v38-1: *ref_113
                BAR-TH-167v38-1: *ref_114
                BAR-TH-168v40-1: *ref_115
                BAR-TH-169v46-1: *ref_116
        required: true
      responses:
        '200':
          description: Retourne le résultat de la simulation
          content:
            application/json:
              schema:
                $schema: https://json-schema.org/draft/2020-12/schema
                title: Simulation CEE
                description: >-
                  Simulation de l'éligibilité et du volume CEE d'une opération
                  standardisée d'économies d'énergie
                type: object
                properties:
                  date:
                    title: Date de la simulation
                    type: string
                    format: date
                  volumeCeeClassique:
                    title: Volume de CEE classique
                    type: integer
                    minimum: 0
                  volumeCeePrecarite:
                    title: Volume de CEE précarité
                    type: integer
                    minimum: 0
                  fiche:
                    title: Fiche d'opération standardisée
                    type: object
                    properties:
                      id:
                        $id: https://schemas.ceeconnect.fr/formats/reference_fiche
                        $schema: https://json-schema.org/draft/2020-12/schema
                        title: Référence interne
                        type: string
                        pattern: >-
                          (AGRI|BAR|BAT|IND|RES|TRA)-(BA|CH|EC|EN|EQ|SE|TH|UT)-[0-9]+(-SE)?v[0-9]+[-][0-9]+
                        examples:
                          - BAR-EN-101v39-4
                          - BAR-EN-102v39-2
                          - BAR-EN-103v39-5
                      code:
                        $id: https://schemas.ceeconnect.fr/formats/code_fiche
                        $schema: https://json-schema.org/draft/2020-12/schema
                        title: Code
                        type: string
                        pattern: >-
                          (AGRI|BAR|BAT|IND|RES|TRA)[-](BA|CH|EC|EN|EQ|SE|TH|UT)[-][0-9]*([-]SE)?
                        examples:
                          - AGRI-EQ-101
                          - BAT-EN-101
                          - BAR-EN-101
                          - IND-BA-110
                          - RES-CH-101
                          - TRA-EQ-101
                      nom:
                        type: string
                      eligibilite:
                        type: boolean
                      volumeCeeClassique:
                        type: integer
                        minimum: 0
                      volumeCeePrecarite:
                        type: integer
                        minimum: 0
                    required:
                      - id
                      - code
                      - nom
                      - eligibilite
                      - volumeCeeClassique
                      - volumeCeePrecarite
                  bonification:
                    title: Bonification
                    type:
                      - object
                      - 'null'
                    properties:
                      id:
                        $id: >-
                          https://schemas.ceeconnect.fr/formats/reference_bonification
                        $schema: https://json-schema.org/draft/2020-12/schema
                        title: Référence interne
                        type: string
                        pattern: >-
                          (ZNI|GPE-ZNI|ETS|CPE|GPE|CFT|CRC|CRM|CTH|CDP|CDC)([-][0-9]+)?v[0-9]*([-][0-9]*)?
                        examples:
                          - CRMv31-1
                          - CDP-1v20-1
                          - ZNIv35-1
                      code:
                        $id: https://schemas.ceeconnect.fr/enums/code-bonification
                        $schema: https://json-schema.org/draft/2020-12/schema
                        title: Code
                        type: string
                        oneOf:
                          - &ref_117
                            const: ZNI
                            title: >-
                              Zones non interconnectées au réseau métropolitain
                              continental de transport d'électricité
                          - &ref_118
                            const: CPE
                            title: Contrat de performance énergétique
                          - &ref_119
                            const: CFT
                            title: >-
                              Coup de pouce Chauffage des bâtiments résidentiels
                              collectifs et tertiaires
                          - &ref_120
                            const: CRC
                            title: >-
                              Coup de pouce Rénovation performante de bâtiment
                              résidentiel collectif
                          - &ref_121
                            const: CRM
                            title: >-
                              Coup de pouce Rénovation performante d'une maison
                              individuelle
                          - &ref_122
                            const: CDP
                            title: Coup de pouce Chauffage
                        $defs:
                          ZNI: *ref_117
                          CPE: *ref_118
                          CFT: *ref_119
                          CRC: *ref_120
                          CRM: *ref_121
                          CDP: *ref_122
                          CDC:
                            const: CDC
                            title: Coup de pouce Covoiturage
                        examples:
                          - ZNI
                          - CPE
                          - CFT
                          - CRC
                          - CRM
                          - CDP
                      nom:
                        type: string
                      eligibilite:
                        type: boolean
                      volumeCeeClassique:
                        type: integer
                        minimum: 0
                      volumeCeePrecarite:
                        type: integer
                        minimum: 0
                    required:
                      - id
                      - code
                      - nom
                      - eligibilite
                      - volumeCeeClassique
                      - volumeCeePrecarite
                required:
                  - date
                  - volumeCeeClassique
                  - volumeCeePrecarite
                  - fiche
                  - bonification
        '400':
          description: Liste des erreurs rencontrées
